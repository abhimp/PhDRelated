\section{Adaptive Bitrate Streaming over Today’s Internet: A Case Study of YouTube}
We analyze the YouTube video streaming system to explore the interplay among various parameters that impact the ABR decision. Although YouTube follows DASH guidelines, it deviates a lot from it. For example, it does not use the standard MPD file; instead, it uses a self-defined format. Similarly, there are several optimizations, and parameters are not known. We collect traffic traces of a sizable amount of YouTube video via a controlled environment and identify the unknown optimizations and parameters.
\subsection{Experimental setup}
In our experiment, we target web-based YouTube player as the data collection platform. Our goal is to collect the HTTP Archive (HAR) of a video session that is available in the debug tool of browsers and {\tt tcpdump} trace. We also want to control the network speed while playing video to understand the quality adjustment triggering point. We automate this entire setup using 3 tools, a) custom build throttler using the Linux library {\tt NetFilterQueue}, c) Firefox plugin {\tt har\_export\_trigger} (version 0.5.0-beta) to dump the HAR automatically without user intervention, and b) {\tt Selenium} to automate the video playback and trigger HAR export. Using our throttler, we change the bandwidth from 200kbps to 2400kbps with a step of 200kbps.
\subsection{Observations}
\subsubsection{Parameter identification}
We find that YouTube forwards several parameters to the server with each HTTP request to fetch the video data from the collected traces. Among these parameters we find {\tt rbuf} and {\tt range} particularly interesting. The {\tt rbuf} is the remaining buffer for a particular {\tt itag} and {\tt range} is data segment (in bytes) of the full video of the particular {\tt itag}. From {\tt range},  we identify the video segment length (in seconds) requested in a HTTP request. We utilize these observations for further analysis.
\subsubsection{Insights into YouTube’s Bitrate Adaptation Algorithm}
With the help of identified parameters, we understand the adaptation strategy up to a certain degree. We find that YouTube takes an opportunistic approach to upgrade video quality when link quality goes up and takes a conservative approach to downgrade video quality while network quality drops. We also find that YouTube adapts segment length as per the network quality. When it finds a steady network condition, it increases the segment length and decreases when it finds poor network conditions.
\subsubsection{Data wastage}
Segment length adaptation may have far-reaching implications in terms of advantages for YouTube streaming, one of which is minimal data wastage. Since segment length increases gradually from lower values to higher values when bandwidth improves, overlaps between the segments of a lower quality and the next higher quality are largely diminished. This implies that data wastage values come down drastically (as opposed to a scenario with no segment length adaptation) – in our experiments, we compute the average wastage ratio, defined as $\frac{data\_downloaded - data\_played}{data\_played}$, to be $0.82\times10^{-6}$. This is in sharp contrast with previously reported values.
